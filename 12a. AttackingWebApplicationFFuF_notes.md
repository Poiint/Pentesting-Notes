There is nothing really hard to understand, so i will just list some notes.

# Basic Fuzzing
## Directory Fuzzing
Specify `-w` for wordlists and `-u` for the URL. We can assign the keyword by adding `:FUZZ` after the wordlist.
```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ
```

```shell-session
Poiint@htb[/htb]$ ffuf -w <command_above> -u http://SERVER_IP:PORT/FUZZ
```

We can increase number of threads with `-t`, but not recommended since it can cause DoS.

## Page Fuzzing
### Extension Fuzzing
Depending on what server is the web application being hosted on, it will have different page extension. For example, for apache servers, the commond extension will be '.php', instead for IIS server, it will be '.asp' or '.aspx'. Be also carefull for other extensions like '.phps', '.php7' ecc... 
Usually to find what extension the server has we can use the evergreen 'index' page. So we can just FUZZ the extension like this

```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/Web-Content/web-extensions.txt:FUZZ -u http://SERVER_I
P:PORT/blog/indexFUZZ
```

Careful that the wordlist contains already the '.' so we don't have to specify it. If you find that the server runs php, you can then fuzz pages like this:

```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/blog/FUZZ.php
```
## Recursive Fuzzing
We can scan recursively by specifying `-recursion` flag, and we can specify the depth with the `-recursion-depth` flag.  If we found several extensions, we can also specify them with `-e`, if more than one, you can divide one by one using a comma ',' (ex: '-e php,php7'). Also the flag `-v` is good to output the full URLs

```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -recursion -recursion-depth 1 -e .php -v
```



# Domain Fuzzing

## Sub-Domain Fuzzing
A sub-domain is any website underlying another domain. For example, `https://photos.google.com` is the `photos` sub-domain of `google.com`.
There is a specific section for sub-domain wordlists, consisting of common words usually used for sub-domains. We can find it in `/usr/share/wordlists/SecLists/Discovery/DNS/`

```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u https://FUZZ.inlanefreight.com/
```

Bare in mind that this will find only PUBLIC sub-domains. Our host will first check the `/etc/hosts` file and if it doesn't have a match it will check the DNS server. If it will not find a match, it will not just list the sub-domain, so if you don't find anything doesn't mean there isn't any. If you find a sub-domain, remember to add it to the `/etc/hosts` for the same reason we said before.

## VHost Fuzzing
Similar to sub-domains, we can find virtual hosts. The difference with a sub-domain is that vhost is a 'sub-domain' that is server in the same server and has the same IP, so from the same IP it can server multiple websites.
Vhosts may or may not have public DNS records. So if we can't find any sub-domain, we can use virtual hosting fuzzing to discover new websites. We can do that by fuzzing HTTP 'Host' header:

```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://academy.htb:PORT/ -H 'Host: FUZZ.academy.htb'
```

## Filtering Results
We can filter the output of ffuf by using matching or filtering rules. 
```shell-session
MATCHER OPTIONS:
  -mc              Match HTTP status codes, or "all" for everything. (default: 200,204,301,302,307,401,403)
  -ml              Match amount of lines in response
  -mr              Match regexp
  -ms              Match HTTP response size
  -mw              Match amount of words in response

FILTER OPTIONS:
  -fc              Filter HTTP status codes from response. Comma separated list of codes and ranges
  -fl              Filter by amount of lines in response. Comma separated list of line counts and ranges
  -fr              Filter regexp
  -fs              Filter HTTP response size. Comma separated list of sizes and ranges
  -fw              Filter by amount of words in response. Comma separated list of word counts and ranges
```

Sometimes we will have a strange output that prints every line of a wordlists. Usually we are looking for different sizes in responses, because if one response has different size from other tons of responses, it means it's different. To filter for "size" we can use the `-fs` flag:

```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://academy.htb:PORT/ -H 'Host: FUZZ.academy.htb' -fs 900
```


# Parameter Fuzzing
## Parameter Fuzzing - GET
If we find a page (for example a .php page) we can try to FUZZ the parameter accepted by the page. With GET requests, parameters are specified in the URL, for example:
- `http://admin.academy.htb:PORT/admin/admin.php?param1=key`.

So what we want to FUZZ is the 'param1' parameter:

```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/Web-Content/burp-parameter-names.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php?FUZZ=key -fs xxx
```

rembember to filter the size, since all the lines in the wordlist can be outputted.

## Parameter Fuzzing - POST
Instead of GET requests, POST requests specify the parameter in the DATA field:

```shell-session
Poiint@htb[/htb]$ ffuf -w /opt/useful/SecLists/Discovery/Web-Content/burp-parameter-names.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'FUZZ=key' -H 'Content-Type: application/x-www-form-urlencoded' -fs xxx
```

we need to specify the `-X POST` to enable POST request, `-d 'FUZZ=key'` to modify the DATA field, and finally we need to specify the `-H 'Content-Type: application/x-www-form-urlencoded'` HTTP header since php "POST" data only accept this kind of header. If you find a match, remember that putting it in the URL will not work, since it would likely be a GET request and not a POST. To look at the response you can use `curl` or burpsuite in case:

```shell-session
Poiint@htb[/htb]$ curl http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'id=key' -H 'Content-Type: application/x-www-form-urlencoded'
```

## Value Fuzzing
The process is the same as for parameter fuzzing, but instead of fuzzing the parameters we fuzzing the values:

```shell-session
Poiint@htb[/htb]$ ffuf -w ids.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'id=FUZZ' -H 'Content-Type: application/x-www-form-urlencoded' -fs xxx
```

For that kind of FUZZ, you should care of what wordlist you are using, because if you are fuzzing ID values, then numering wordlist are the most probably to work, if you FUZZ usernames, then you should look for username wordlists, ecc...
